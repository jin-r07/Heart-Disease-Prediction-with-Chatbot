<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" type="image/x-icon" href="../static/assets/logo.png">
    <link rel="stylesheet" type="text/css" href="../static/forgotPassword.css">
    <script src="https://kit.fontawesome.com/cacd88a93b.js" crossorigin="anonymous"></script>
    <title>Forgot Password - Heart Disease Prediction ChatBot</title>
</head>
<body>
<div class="form-container">
    <i class="fa-solid fa-lock"></i>
    <div class="logo-container">Forgot Password</div>
    <form class="form" action="/forgotPassword" method="POST" onsubmit="return validateForm()">
        <div class="form-group">
            <label for="myInput1" class="label">Email</label>
            <input id="myInput1" class="input" name="email" placeholder="Enter your email" type="email"
                   oninput="validateEmail()">
            <span id="emailError" class="error"></span>
        </div>
        <button class="form-submit-btn" id="submitButton" type="submit" disabled>Submit</button>
    </form>
    <p class="signup-link">Don't have an account?
        <a href="/register" class="signup-link link"> Sign up now</a>
    </p>
</div>

<div id="customAlert" class="alert-container">
    <p id="customAlertMessage"></p>
</div>

{% if alert_message3 %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var alertMessage = "{{ alert_message3 }}";
        var customAlert = document.getElementById("customAlert");
        var customAlertMessage = document.getElementById("customAlertMessage");

        customAlertMessage.textContent = alertMessage;
        customAlert.classList.add("show");

        setTimeout(function () {
            customAlert.classList.remove("show");
        }, 5000);
    });
</script>
{% endif %}

<script>
    function validateEmail() {
        let email = document.getElementById("myInput1").value;
        let regexE = /^([a-zA-Z0-9])+@(([a-zA-Z0-9])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (email === "") {
            document.getElementById("emailError").textContent = "Email Required";
            return false;
        } else if (!regexE.test(email)) {
            document.getElementById("emailError").textContent = "Invalid email address";
            return false;
        } else {
            document.getElementById("emailError").textContent = "";
            enableSubmitButton();
            return true;
        }
    }

    function enableSubmitButton() {
        let emailError = document.getElementById("emailError").textContent;
        let submitButton = document.getElementById("submitButton");

        if (emailError === "") {
            submitButton.disabled = false;
        } else {
            submitButton.disabled = true;
        }
    }

    function validateForm() {
        if (
            validateEmail()
        ) {
            return true;
        } else {
            return false;
        }
    }
</script>
</body>
</html>